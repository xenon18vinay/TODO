{% extends 'base.html' %}

{% block content %}
	<p>This is test subject</p>
    <form method="POST">
        {% csrf_token %}
        {{ form.as_p }}
    <button type="submit">Submit</button>
    </form>
    <div>
    {% for todo in todo_list %}
        {% ifchanged todo.created_at.date%}
            <h3 style="color: white; margin-top: 20px;">{{ todo.created_at|date:"d M Y" }}</h3>
        {% endifchanged %}

        <p>
        <form METHOD="POST" action="{% url 'toggle_todo' todo.pk %} ">
           {% csrf_token %}
            <label for="todo-{{ todo.pk }}">
            <div>
                <input type="checkbox" id="todo-{{ todo.pk }}" name="checker" onchange="this.form.submit()" {% if todo.checker %}checked{% endif %}>
               <small style="color: aliceblue; margin-left: 5px; ">{{ todo.created_at }}</small> <br>
    	       {{ todo.to_do }}
            </div>
        </label>
        </form>
        <form METHOD="POST" action="{% url 'delete_todo' todo.pk %} " >
        {% csrf_token %}
            <label for="delete-{{ todo.pk }}">
                <button class="close-button" id="delete-{{ todo.pk }}" onclick="this.form.submit()">&times;</button>
            </label>
        </form>

        </p>
    {% endfor %}

    </div>

{% endblock %}